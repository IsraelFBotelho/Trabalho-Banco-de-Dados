<ui:composition
        template="./index.xhtml"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:f="http://xmlns.jcp.org/jsf/core"
        xmlns:p="http://primefaces.org/ui">

    <ui:define name="pagina">
        <p:growl id="messages" showDetail="true"/>

        <div class="card">
            <h:form id="c">
                <p:messages>
                    <p:autoUpdate/>
                </p:messages>
                <p:menuButton value="Tipo de GrÃ¡fico">
                    <p:menuitem value="#{relatoriosController.cities}"/>
                    <p:menuitem value="Cidade" action="#{relatoriosController.setType('C')}" update="c"
                                icon="pi pi-chart-line"/>
                    <p:menuitem value="Geral" action="#{relatoriosController.setType('G')}" update="c"
                                icon="pi pi-chart-line"/>
                    Media das taxas de desmatamento no ano x media da terperatura maxima no ano
                </p:menuButton>

                <p:spacer width="1" height="22" rendered="#{relatoriosController.type eq 'C'}"
                          style="position: relative; bottom: -5px;background-color: #A8A8A8; margin-left: 10px;margin-right: 10px"/>

                <p:selectOneMenu id="option" value="#{relatoriosController.city}" style="margin-bottom: 9px"
                                 rendered="#{relatoriosController.type eq 'C'}">
                    <!--                    <p:ajax event="change" process="@this"/>-->
                    <p:ajax event="change" update="chartCity" listener="#{relatoriosController.renderCity()}"/>
                    <f:selectItem itemLabel="Escolha uma cidade" itemValue=""/>
                    <f:selectItems value="#{relatoriosController.cities}" var="city"
                                   itemValue="#{city}"/>
                </p:selectOneMenu>

                <!--                <p:commandButton value="Submit" update="card-c" icon="pi pi-check"-->
                <!--                                 rendered="#{relatoriosController.type eq 'C'}"-->
                <!--                                 action="#{relatoriosController.renderCity()}"/>-->


                <div class="card">
                    <p:lineChart model="#{relatoriosController.lineModel}"
                                 rendered="#{relatoriosController.type eq 'G'}"
                                 style="width: 100%; height: 500px;"/>
                </div>

                <div class="card">
                    <p:lineChart id="chartCity" model="#{relatoriosController.lineModel}"
                                 rendered="#{relatoriosController.type eq 'C'}" style="width: 100%; height: 500px;"/>
                </div>

                <p:dialog header="Values" modal="true" showEffect="bounce" widgetVar="dlg" resizable="false">
                    <p:panelGrid columns="2" id="display" columnClasses="label,value">
                        <h:outputText value="Cidade:"/>
                        <h:outputText value="#{relatoriosController.city}"/>
                    </p:panelGrid>
                </p:dialog>
            </h:form>
        </div>

    </ui:define>
</ui:composition>