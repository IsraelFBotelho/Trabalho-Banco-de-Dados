<ui:composition
        template="./index.xhtml"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:f="http://xmlns.jcp.org/jsf/core"
        xmlns:p="http://primefaces.org/ui">

    <ui:define name="pagina">
        <p:growl id="messages" showDetail="true"/>

        <div class="card">
            <h:form id="c" style="margin-top: 10px">
                <p:messages>
                    <p:autoUpdate/>
                </p:messages>
                <p:menuButton value="Tipo de Gráfico">
                    <p:menuitem value="Relação" action="#{relatoriosController.setType('R')}" update="c"
                                icon="pi pi-chart-line"/>
                    <p:menuitem value="Temperatura" action="#{relatoriosController.setType('T')}" update="c"
                                icon="pi pi-chart-line"/>
                    <p:menuitem value="Desmatado" action="#{relatoriosController.setType('D')}" update="c"
                                icon="pi pi-chart-line"/>
                    Media das taxas de desmatamento no ano x media da terperatura maxima no ano
                </p:menuButton>

                <p:spacer width="1" height="22" rendered="#{relatoriosController.type eq 'T' or relatoriosController.type eq 'D'}"
                          style="position: relative; bottom: -5px;background-color: #A8A8A8; margin-left: 10px;margin-right: 10px"/>

                <p:selectOneMenu id="option" value="#{relatoriosController.city}" style="margin-bottom: 9px"
                                 rendered="#{relatoriosController.type eq 'T'}">

                    <p:ajax event="change" update="chartCity" listener="#{relatoriosController.renderCity()}"/>
                    <f:selectItem itemLabel="Escolha uma cidade" itemValue=""/>
                    <f:selectItems value="#{relatoriosController.cities}" var="city"
                                   itemValue="#{city}"/>
                </p:selectOneMenu>

                <p:selectOneMenu id="option_des" value="#{relatoriosController.cityDesmatado}" style="margin-bottom: 9px"
                                 rendered="#{relatoriosController.type eq 'D'}">

                    <p:ajax event="change" update="chartCity" listener="#{relatoriosController.renderCityDesmatado()}"/>
                    <f:selectItem itemLabel="Escolha uma cidade" itemValue=""/>
                    <f:selectItems value="#{relatoriosController.citiesDemastado}" var="city"
                                   itemValue="#{city}"/>
                </p:selectOneMenu>


                <div class="card">
                    <p:lineChart model="#{relatoriosController.lineModel}" id="chartCity"
                                 rendered="#{relatoriosController.type eq 'T' or relatoriosController.type eq 'D' or relatoriosController.type eq 'R'}"
                                 style="width: 100%; height: 500px;"/>
                </div>

            </h:form>
        </div>

    </ui:define>
</ui:composition>